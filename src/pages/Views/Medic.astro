---
import Layout from "../../layouts/Layout.astro"
---

<Layout title="Medic Dashboard">

<main class="flex min-h-screen bg-gray-100">
  <!-- Sidebar -->
  <aside class="bg-blue-500 text-white w-1/5 flex flex-col items-center py-6 space-y-8">
    <!-- Logo -->
    <div class="flex flex-col items-center space-y-4">
      <img src="/icons/heart-icon.svg" alt="Logo" class="w-10 h-10" />
    </div>

    <!-- Navigation -->
    <nav class="space-y-6 text-center">
      <button class="flex items-center space-x-4 hover:bg-blue-600 px-4 py-2 w-full">
        <img src="/icons/home-icon.svg" alt="Home" class="w-6 h-6" />
        <span>Inicio</span>
      </button>
      <button class="flex items-center space-x-4 hover:bg-blue-600 px-4 py-2 w-full">
        <img src="/icons/search-icon.svg" alt="Buscar Paciente" class="w-6 h-6" />
        <span>Buscar Paciente</span>
      </button>
      <button class="flex items-center space-x-4 hover:bg-blue-600 px-4 py-2 w-full">
        <img src="/icons/clipboard-icon.svg" alt="Expedientes" class="w-6 h-6" />
        <span>Expedientes</span>
      </button>
      <button class="flex items-center space-x-4 hover:bg-blue-600 px-4 py-2 w-full">
        <img src="/icons/calendar-icon.svg" alt="Calendario" class="w-6 h-6" />
        <span>Calendario</span>
      </button>
    </nav>
  </aside>

  <!-- Main Content -->
  <section class="flex-grow p-8 bg-white">
    <!-- Header -->
    <div class="flex justify-between items-center mb-6">
      <div>
        <h2 id="doctor-name" class="text-2xl font-semibold">Loading...</h2>
        <p id="doctor-role" class="text-gray-600">Cargando...</p>
      </div>
      <button class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
        + Crear Expediente
      </button>
    </div>

    <!-- Buttons Section -->
    <div class="space-y-4">
      <button class="w-full bg-blue-500 text-white py-4 rounded-lg shadow-md text-left px-4 hover:bg-blue-600">
        Realizar Receta
      </button>
      <button class="w-full bg-blue-500 text-white py-4 rounded-lg shadow-md text-left px-4 hover:bg-blue-600">
        Buscar Paciente
      </button>
      <button class="w-full bg-blue-500 text-white py-4 rounded-lg shadow-md text-left px-4 hover:bg-blue-600">
        Crear Expediente
      </button>
    </div>
  </section>

  <!-- Script to Fetch Name -->
  <script>
    async function fetchDoctorData() {
      try {
        const response = await fetch('/api/doctor'); // Replace with actual API endpoint
        const data = await response.json();
        document.getElementById('doctor-name').textContent = data.name || "Nombre no disponible";
        document.getElementById('doctor-role').textContent = data.role || "Rol no disponible";
      } catch (error) {
        console.error("Error fetching doctor data:", error);
        document.getElementById('doctor-name').textContent = "Error al cargar";
        document.getElementById('doctor-role').textContent = "Error al cargar";
      }
    }

    fetchDoctorData();
  </script>
</main>

</Layout>
