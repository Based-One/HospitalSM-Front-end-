---
import Layout from "../../layouts/Layout.astro"
---

<Layout title="Medic Dashboard">

<main class="flex min-h-screen bg-gray-100">
  <!-- Sidebar -->
  <aside class="bg-blue-500 text-white w-1/5 flex flex-col items-center py-6 space-y-8">
    <!-- Logo -->
    <div class="flex flex-col items-center space-y-4">
      <img src="/icons/heart-icon.svg" alt="Logo" class="w-10 h-10" />
    </div>

    <!-- Navigation -->
   
  </aside>

  <!-- Main Content -->
  <section class="flex-grow p-8 bg-white">
    <!-- Header -->
    <div class="flex justify-between items-center mb-6">
      <div>
        <h2 id="doctor-name" class="text-2xl font-semibold">Loading...</h2>
        <p id="doctor-role" class="text-gray-600">Cargando...</p>
      </div>
    </div>

    <!-- Buttons Section -->
    <div class="space-y-4">
      <button id="create-prescription" class="w-full bg-blue-500 text-white py-4 rounded-lg shadow-md text-left px-4 hover:bg-blue-600">
        Realizar Receta
      </button>
      <button id="consult-record" class="w-full bg-blue-500 text-white py-4 rounded-lg shadow-md text-left px-4 hover:bg-blue-600">
        Consultar Expediente
      </button>
      <button id="update-diagnosis" class="w-full bg-blue-500 text-white py-4 rounded-lg shadow-md text-left px-4 hover:bg-blue-600">
        Actualizar diagn√≥stico
      </button>
    </div>
  </section>

  <!-- Script to Fetch Name -->
  <script>
    async function fetchDoctorData() {
      try {
        const response = await fetch('/api/doctor'); // Replace with actual API endpoint
        const data = await response.json();
        document.getElementById('doctor-name').textContent = data.name || "Nombre no disponible";
        document.getElementById('doctor-role').textContent = data.role || "Rol no disponible";
      } catch (error) {
        console.error("Error fetching doctor data:", error);
        document.getElementById('doctor-name').textContent = "Error al cargar";
        document.getElementById('doctor-role').textContent = "Error al cargar";
      }
    }

    fetchDoctorData();
    document.getElementById("consult-record").addEventListener("click", (event)=>{
      window.location.href="../Record";});
    document.getElementById("create-prescription").addEventListener("click",(event)=>{
      window.location.href="../Prescription";


    });


    
  </script>
</main>

</Layout>
